<div class="container py-2">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <div class="mb-5 form-title">Say Hello!</div>

      <!-- Success Message -->
      <div
        *ngIf="submitSuccess"
        class="alert alert-success fade-in"
        role="alert"
      >
        <i class="fas fa-check-circle me-2"></i>
        <strong>Message sent successfully!</strong> Thank you for reaching out.
        I'll get back to you soon.
      </div>

      <!-- Error Message -->
      <div *ngIf="submitError" class="alert alert-danger fade-in" role="alert">
        <i class="fas fa-exclamation-triangle me-2"></i>
        <strong>Oops!</strong> {{ errorMessage }}
      </div>

      <form [formGroup]="FormData" (ngSubmit)="onSubmit(FormData.value)">
        <!-- Name Field -->
        <div class="form-group mb-3">
          <div class="input-wrapper">
            <i class="fas fa-user input-icon"></i>
            <input
              id="name"
              type="text"
              class="form-control"
              [class.is-invalid]="isFieldInvalid('name')"
              [class.is-valid]="
                FormData.get('name')?.valid && FormData.get('name')?.touched
              "
              placeholder="Enter your name"
              formControlName="name"
            />
          </div>
          <div *ngIf="isFieldInvalid('name')" class="invalid-feedback">
            {{ getFieldError("name") }}
          </div>
        </div>

        <!-- Email Field -->
        <div class="form-group mb-3">
          <div class="input-wrapper">
            <i class="fas fa-envelope input-icon"></i>
            <input
              id="email"
              type="email"
              class="form-control"
              [class.is-invalid]="isFieldInvalid('email')"
              [class.is-valid]="
                FormData.get('email')?.valid && FormData.get('email')?.touched
              "
              placeholder="Enter your email address"
              formControlName="email"
            />
          </div>
          <div *ngIf="isFieldInvalid('email')" class="invalid-feedback">
            {{ getFieldError("email") }}
          </div>
        </div>

        <!-- Message Field -->
        <div class="form-group mb-3">
          <div class="input-wrapper">
            <i class="fas fa-comment input-icon textarea-icon"></i>
            <textarea
              id="message"
              class="form-control"
              [class.is-invalid]="isFieldInvalid('message')"
              [class.is-valid]="
                FormData.get('message')?.valid &&
                FormData.get('message')?.touched
              "
              formControlName="message"
              rows="5"
              placeholder="Tell me about your project, ideas, or just say hello!"
            ></textarea>
          </div>
          <div *ngIf="isFieldInvalid('message')" class="invalid-feedback">
            {{ getFieldError("message") }}
          </div>
          <div class="form-text">
            <small
              >{{ FormData.get("message")?.value?.length || 0 }}/500
              characters</small
            >
          </div>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
          <button
            type="submit"
            class="btn btn-primary submit-button"
            [disabled]="FormData.invalid || isSubmitting"
          >
            <span *ngIf="!isSubmitting">
              <i class="fas fa-paper-plane me-2"></i>
              Send Message
            </span>
            <span *ngIf="isSubmitting">
              <div
                class="spinner-border spinner-border-sm me-2"
                role="status"
                aria-hidden="true"
              ></div>
              Sending...
            </span>
          </button>

          <button
            type="button"
            class="btn btn-outline-secondary ms-3"
            (click)="resetForm()"
            [disabled]="isSubmitting"
          >
            <i class="fas fa-undo me-2"></i>
            Reset
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
